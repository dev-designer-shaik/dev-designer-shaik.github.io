<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DesignerShaik Documentation – Unified Digital Ecosystem Guide</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  /* --- ENHANCED DESIGN TOKEN SET --- */
  :root{--primary-color:#007acc;--secondary-color:#28a745;--accent-color:#ffc107;--text-color:#333;
        --bg-light:#fafafa;--bg-medium:#f8f9fa;--bg-dark:#1a1a1a;--card-bg:#fff;--border-color:#e9ecef;
        --shadow-light:0 2px 8px rgba(0,0,0,0.05);--shadow-medium:0 2px 10px rgba(0,0,0,0.1);
        --shadow-heavy:0 4px 20px rgba(0,0,0,0.15);--header-height:80px;--nav-height:60px;}
  
  html,body{margin:0;font-family:'Poppins',sans-serif;background:var(--bg-light);color:var(--text-color);line-height:1.6;scroll-behavior:smooth;}
  
  /* HEADER STYLING */
  header{background:linear-gradient(135deg, var(--bg-dark) 0%, #2d2d2d 100%);color:#fff;padding:1.5rem 3rem;
         position:absolute;top:0;z-index:1000;box-shadow:var(--shadow-heavy);height:var(--header-height);
         display:flex;align-items:center;justify-content:space-between;}
  
  .header-content{display:flex;align-items:center;gap:2rem;flex:1;}
  .logo-container{display:flex;align-items:center;gap:1rem;}
  .logo-container img{height:50px;width:auto;border-radius:8px;}
  .header-text{flex:1;}
  .header-text h1{margin:0;font-size:2.2rem;font-weight:700;letter-spacing:-0.5px;}
  .header-text .subtitle{margin:0.3rem 0 0 0;font-size:1rem;opacity:0.9;font-weight:300;}
  
  /* HORIZONTAL NAVIGATION */
  .horizontal-nav{background:rgba(255,255,255,0.98);backdrop-filter:blur(10px);visibility: hidden; border-bottom:1px solid var(--border-color);
                  position:fixed;top:var(--header-height);left:0;right:0;z-index:999;height:var(--nav-height);
                  display:flex;align-items:center;padding:0 3rem;transform:translateY(-100%);
                  transition:transform 0.3s ease;box-shadow:var(--shadow-medium);}
  
  .horizontal-nav.visible{transform:translateY(0); visibility: visible;}
  
  .nav-links{display:flex;gap:0;list-style:none;margin:0;padding:0;flex:1;overflow-x:auto;}
  .nav-links li{white-space:nowrap;}
  .nav-links a{display:block;padding:0.8rem 1.5rem;color:var(--text-color);text-decoration:none;
               font-weight:500;font-size:0.9rem;border-radius:6px;transition:all 0.2s ease;
               border-bottom:3px solid transparent;}
  .nav-links a:hover{background:var(--bg-medium);color:var(--primary-color);border-bottom-color:var(--primary-color);}
  .nav-links a.active{background:var(--primary-color);color:#fff;border-bottom-color:var(--primary-color);}
  
  /* MAIN CONTENT */
  main{padding: 10rem 2.5rem;max-width:1400px;margin:auto;margin-top:0;}
  
  /* SECTIONS */
  section{margin-bottom:5rem;background:var(--card-bg);padding:3rem;border-radius:12px;
          border-left:6px solid var(--primary-color);box-shadow:var(--shadow-light);
          transition:box-shadow 0.3s ease;}
  section:hover{box-shadow:var(--shadow-medium);}
  
  /* TYPOGRAPHY */
  h1{margin:0;font-size:2.2rem;font-weight:700;letter-spacing:-0.5px;}
  h2{color:var(--primary-color);font-size:2rem;margin-bottom:1.5rem;border-bottom:3px solid var(--primary-color);
      padding-bottom:1rem;font-weight:700;letter-spacing:-0.3px;}
  h3{color:var(--text-color);font-size:1.5rem;margin-top:2.5rem;margin-bottom:1.2rem;font-weight:600;}
  h4{color:var(--text-color);font-size:1.3rem;margin-top:2rem;margin-bottom:1rem;font-weight:600;}
  
  /* TABLE OF CONTENTS */
  .toc{background:linear-gradient(135deg, var(--bg-medium) 0%, #f0f4f8 100%);padding:2.5rem;
       border-radius:12px;margin-bottom:4rem;box-shadow:var(--shadow-medium);
       border:1px solid var(--border-color);position:relative;}
  .toc::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;
               background:linear-gradient(90deg, var(--primary-color), var(--secondary-color));
               border-radius:12px 12px 0 0;}
  .toc h3{margin-top:0;color:var(--primary-color);border-bottom:2px solid var(--primary-color);
          padding-bottom:1rem;margin-bottom:1.5rem;font-size:1.6rem;}
  .toc ul{list-style:none;padding-left:0;display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:0.8rem;}
  .toc li{margin:0;}
  .toc a{color:var(--primary-color);text-decoration:none;font-weight:500;padding:0.8rem 1.2rem;
         border-radius:8px;display:block;transition:all 0.2s ease;border:1px solid transparent;}
  .toc a:hover{text-decoration:none;background:var(--card-bg);color:var(--secondary-color);
               border-color:var(--secondary-color);transform:translateX(5px);box-shadow:var(--shadow-light);}
  
  /* CODE AND PRE */
  pre{background:#2d2d2d;color:#f8f8f2;padding:1.8rem;border-radius:10px;overflow-x:auto;
      margin:2rem 0;box-shadow:inset 0 0 15px rgba(0,0,0,0.2);border:1px solid #444;}
  code{font-family:'Fira Code', Monaco, Consolas, monospace;font-size:0.9rem;
       background:#eef;padding:0.3em 0.6em;border-radius:4px;color:#d63384;}
  pre code{background:none;padding:0;color:inherit;font-size:0.95rem;}
  
  /* MERMAID DIAGRAMS */
  .mermaid{background:var(--card-bg);border:1px solid var(--border-color);padding:2rem;
           border-radius:10px;box-shadow:var(--shadow-light);margin:2rem 0;text-align:center;
           overflow-x:auto;}
  
  /* TABLES */
  table{border-collapse:collapse;width:100%;margin:2rem 0;box-shadow:var(--shadow-light);
        border-radius:10px;overflow:hidden;font-size:0.95rem;}
  th,td{border:1px solid var(--border-color);padding:1.2rem;text-align:left;}
  th{background:var(--primary-color);color:#fff;font-weight:600;text-transform:uppercase;
     font-size:0.85rem;letter-spacing:0.5px;}
  tr:nth-child(even){background:var(--bg-medium);}
  tr:hover{background:#f0f7ff;}
  
  /* NOTES AND HIGHLIGHTS */
  .note{background:#d1e7dd;padding:1.5rem;border-left:5px solid var(--secondary-color);
        margin:2rem 0;border-radius:8px;color:#0f5132;box-shadow:var(--shadow-light);}
  .highlight{background:#fff3cd;padding:1.5rem;border-left:5px solid var(--accent-color);
             margin:2rem 0;border-radius:8px;color:#664d03;box-shadow:var(--shadow-light);}
  .warning{background:#f8d7da;padding:1.5rem;border-left:5px solid #dc3545;
           margin:2rem 0;border-radius:8px;color:#721c24;box-shadow:var(--shadow-light);}
  
  /* LISTS */
  ul,ol{margin:1.2rem 0;padding-left:1.8rem;}
  li{margin:0.8rem 0;line-height:1.7;}
  
  /* COST COMPARISON CARDS */
  .cost-comparison{display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
                   gap:1.5rem;margin:2rem 0;}
  .cost-card{background:var(--card-bg);border:1px solid var(--border-color);border-radius:10px;
             padding:1.5rem;box-shadow:var(--shadow-light);transition:all 0.3s ease;}
  .cost-card:hover{transform:translateY(-5px);box-shadow:var(--shadow-medium);}
  .cost-card h4{margin-top:0;color:var(--primary-color);font-size:1.2rem;}
  .cost-price{font-size:1.8rem;font-weight:700;color:var(--secondary-color);margin:0.5rem 0;}
  
  /* DEPLOYMENT GRAPHS */
  .deployment-graph-container{display:grid;grid-template-columns:1fr;gap:3rem;margin:2rem 0;}
  .deployment-graph-container > div{background:var(--card-bg);padding:2rem;border-radius:10px;
                                    box-shadow:var(--shadow-light);border:1px solid var(--border-color);}
  
  /* FOOTER */
  footer{background:linear-gradient(135deg, var(--bg-dark) 0%, #2d2d2d 100%);color:#fff;
         text-align:center;padding:3rem;margin-top:5rem;font-size:0.95rem;}
  footer p{margin:0.8rem 0;opacity:0.9;}
  
  /* LAPTOP OPTIMIZATION */
  @media(min-width:1024px){
    .horizontal-nav{padding:0 5rem;}
    main{padding:4rem 5rem;max-width:1600px;}
    section{padding:3.5rem;}
    header{padding:1.5rem 5rem;}
    .nav-links{gap:0.5rem;}
    .nav-links a{padding:0.8rem 1.8rem;}
    .toc ul{grid-template-columns:repeat(auto-fit, minmax(320px, 1fr));}
  }
  
  /* TABLET AND MOBILE */
  @media(max-width:1023px){
    header{padding:1rem;flex-direction:column;text-align:center;height:auto;}
    .header-content{flex-direction:column;gap:1rem;}
    .horizontal-nav{padding:0 1rem;overflow-x:auto;}
    .nav-links{gap:0;min-width:max-content;}
    .nav-links a{padding:0.8rem 1rem;font-size:0.85rem;}
    main{padding:2rem 1rem;}
    section{padding:2rem;}
    h1{font-size:1.8rem;}
    h2{font-size:1.6rem;}
    h3{font-size:1.4rem;}
    .toc ul{grid-template-columns:1fr;}
    .cost-comparison{grid-template-columns:1fr;}
    table,th,td{display:block;width:100%;box-sizing:border-box;}
    th{text-align:center;background:var(--primary-color);color:#fff;}
    td{text-align:center;border-bottom:1px solid var(--border-color);}
    tr{margin-bottom:1rem;border:1px solid var(--border-color);border-radius:8px;overflow:hidden;display:block;}
    td:before{content:attr(data-label);font-weight:bold;display:inline-block;width:120px;text-align:left;}
  }
  
  /* SCROLL INDICATORS */
  .section-visible{animation:fadeInUp 0.6s ease;}
  @keyframes fadeInUp{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}
</style>
</head>
<body>
<header>
  <div class="header-content">
    <div class="logo-container">
      <img src="logo.webp" alt="DesignerShaik Logo" onerror="this.style.display='none'">
      <div class="header-text">
        <h1>DesignerShaik Documentation</h1>
        <p class="subtitle">Marayai × DS Studio – Unified Digital Ecosystem Guide</p>
      </div>
    </div>
  </div>
</header>

<nav class="horizontal-nav" id="horizontalNav">
  <ul class="nav-links">
    <li><a href="#purpose" data-section="purpose">Purpose & Scope</a></li>
    <li><a href="#governance" data-section="governance">Governance</a></li>
    <li><a href="#workspace" data-section="workspace">Workspace</a></li>
    <li><a href="#repository" data-section="repository">Repository</a></li>
    <li><a href="#database" data-section="database">Database</a></li>
    <li><a href="#automation" data-section="automation">Automation</a></li>
    <li><a href="#media-guide" data-section="media-guide">Media Pipeline</a></li>
    <li><a href="#implementation" data-section="implementation">Implementation</a></li>
    <li><a href="#deployment" data-section="deployment">Deployment</a></li>
    <li><a href="#security" data-section="security">Security</a></li>
    <li><a href="#testing" data-section="testing">Testing</a></li>
    <li><a href="#best-practices" data-section="best-practices">Best Practices</a></li>
    <li><a href="#change" data-section="change">Change Management</a></li>
  </ul>
</nav>

<main>

<div class="toc">
  <h3>📋 Table of Contents</h3>
  <ul>
    <li><a href="#purpose">🎯 Purpose & Scope</a></li>
    <li><a href="#governance">🏛️ Governance & IP Ownership</a></li>
    <li><a href="#workspace">🌐 Google Workspace OU / Shared-Drive Architecture</a></li>
    <li><a href="#repository">📁 DSI Repository Structure</a></li>
    <li><a href="#database">🗄️ Database & Data-Lake Blueprint</a></li>
    <li><a href="#automation">🤖 Automation & AI-Agent Matrix</a></li>
    <li><a href="#media-guide">🎞️ Media-Pipeline Implementation Guide</a></li>
    <li><a href="#implementation">🔧 Technical Implementation</a></li>
    <li><a href="#deployment">🚀 Deployment & Hosting Options</a></li>
    <li><a href="#security">🔒 Security & Compliance</a></li>
    <li><a href="#testing">🧪 Testing & Monitoring</a></li>
    <li><a href="#best-practices">⭐ Best Practices & Optimization</a></li>
    <li><a href="#change">🔄 Change-Management & Review Cycle</a></li>
  </ul>
</div>

<section id="purpose">
<h2>🎯 Purpose & Scope</h2>
<p>This unified guide consolidates the DSI Media Repository Integration Architecture into a single, comprehensive digital stack. It replaces piecemeal PDFs and chat notes with a single, searchable HTML reference. Content is sourced from the technical specifications and implementation guidelines.</p>

<h3>Core Technologies Used</h3>
<div class="mermaid">
graph LR
    subgraph "Data Sources & Storage"
        GD[Google Drive<br/>Primary Source]
        QNAP[QNAP NAS<br/>Local Backup]
        S3[AWS S3/GCS<br/>Cold Storage]
    end
    
    subgraph "Processing & AI"
        N8N[n8n<br/>Workflow Engine]
        OAI[OpenAI<br/>AI Analysis]
        PS[Google Pub/Sub<br/>Event Transport]
    end
    
    subgraph "Databases"
        WV[Weaviate<br/>Vector Search]
        PG[PostgreSQL<br/>Metadata & Logs]
    end
    
    subgraph "Distribution & CDN"
        CDN[Cloudinary<br/>Media Optimization]
        GC[Google Chat<br/>Notifications]
    end
    
    style GD fill:#4285f4,color:#fff
    style N8N fill:#ea4560,color:#fff
    style WV fill:#fa6423,color:#fff
    style PG fill:#336791,color:#fff
    style CDN fill:#3448c5,color:#fff
    style QNAP fill:#00a8e6,color:#fff
    style OAI fill:#00a67e,color:#fff
    style PS fill:#4285f4,color:#fff
    style S3 fill:#ff9900,color:#fff
    style GC fill:#34a853,color:#fff
</div>

<table>
  <thead>
    <tr>
      <th>Category</th>
      <th>Technology</th>
      <th>Primary Function</th>
      <th>Integration Points</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>Source Control</td><td>Google Drive</td><td>Primary media repository</td><td>n8n triggers, AI processing</td></tr>
    <tr><td>Orchestration</td><td>n8n</td><td>Workflow automation engine</td><td>All systems integration hub</td></tr>
    <tr><td>Vector Database</td><td>Weaviate</td><td>AI-powered semantic search</td><td>OpenAI embeddings, metadata</td></tr>
    <tr><td>Relational DB</td><td>PostgreSQL</td><td>Structured metadata storage</td><td>Audit logs, processing status</td></tr>
    <tr><td>AI Processing</td><td>OpenAI</td><td>Content analysis & tagging</td><td>Weaviate vectors, metadata</td></tr>
    <tr><td>CDN & Optimization</td><td>Cloudinary</td><td>Media transformation & delivery</td><td>URL generation, format optimization</td></tr>
    <tr><td>Local Backup</td><td>QNAP NAS</td><td>On-premise redundancy</td><td>Real-time Drive sync</td></tr>
    <tr><td>Event Messaging</td><td>Google Pub/Sub</td><td>Real-time event processing</td><td>File upload triggers</td></tr>
    <tr><td>Notifications</td><td>Google Chat</td><td>Team communication</td><td>Workflow status updates</td></tr>
    <tr><td>Cold Storage</td><td>AWS S3/Google Cloud Storage</td><td>Long-term archival</td><td>Data lake, compliance</td></tr>
  </tbody>
</table>
</section>

<section id="governance">
<h2>🏛️ Governance & IP Ownership</h2>
<h3>2.1 IP Hierarchy</h3>
<div class="mermaid">
graph LR
MH[Marayai Holdings<br/>Parent Company] --> SF[Shaikdom Foundation<br/>Non‑Profit Arm]
MH --> DSS[Designer Shaik Studio<br/>Creative Unit]
DSS --> DSI[DSI Product Repository<br/>Content Hub]
SF --> DSI
</div>
<h3>2.2 Digital Asset Ownership</h3>
<p>All digital assets created or acquired by any entity within the Marayai ecosystem are ultimately owned by Marayai Holdings. Usage rights, licensing, and distribution are governed by specific protocols outlined in this guide.</p>
<h3>2.3 Compliance & Legal</h3>
<p>Adherence to regional data privacy laws (e.g., GDPR, ADGM) and international intellectual property regulations is mandatory. Regular audits are conducted to ensure compliance.</p>
</section>

<section id="workspace">
<h2>🌐 Google Workspace OU / Shared-Drive Architecture</h2>
<p>The Google Workspace environment is structured to reflect the organizational hierarchy and facilitate efficient collaboration and data management. Shared drives are used for centralized access and governance of key digital assets.</p>

<h3>Current Workspace Shared Drives Directory</h3>
<pre><code>
[SANDBOX] DSI 00 - Archive
[SANDBOX] DSI 01 - Technical-BIM & R&D
[SANDBOX] DSI 02 - Finance & Legal
[SANDBOX] DSI 03 - Marketing & Investor Relations
[SANDBOX] DSI 04 - Project Marayai
    Project‐Marayai
    ├── Country_Nodes
    ├── Desert_Voyager_Sculpture
    ├── Master_Plans
    └── Orb_Nexus_Bahrain
        ├── CGI
        ├── Drawings
        └── Permits
[SANDBOX] DSi 05 - Media Governance        
    Governance & Protocols
    ├── Change‐Log
    ├── Domain & DNS Records
    └── IP & Licences
[SANDBOX] DSi 06 - Media Repository
    DSI-Product-Repository
    ├── DSI-Product-Repository
    │   ├── Metadata
    │   ├── Palace-of-Fragrances
    │   ├── Palace-of-Precision
    │   ├── Palace-of-Style
    │   └── Processed-Media
    │       ├── ERP-Integrated
    │       ├── Social-Media-Posts
    │       └── Web-Optimized
    │           ├── Metadata
    │           │   ├── AI-Generated-Tags
    │           │   ├── Approval-Stages
    │           │   ├── Media-Change-History
    │           │   ├── Multilingual-Descriptions
    │           │   └── Tagging-Data
    │           │   └── Version-Control
    │           ├── Palace-of-Fragrances
    │           │   ├── Classic-Range
    │           │   │   ├── Amber-Kroud
    │           │   │   ├── Chic-Shaik-Emerald
    │           │   │   ├── Opulent-Shaik-Amethyst
    │           │   │   ├── Opulent-Shaik-Sapphire
    │           │   │   └── Sochi-Onyx
    │           │   └── Precious-Range
    │           │       ├── Objet-d-Art-Luxury-Sterling-Silver
    │           │       └── Objet-d-Art-Optimum-Precious-Gold
    │           ├── Palace-of-Precision
    │           └── Palace-of-Style
</code></pre>

<h3>3.1 Organizational Units (OUs)</h3>
<p>OUs mirror the corporate structure, allowing for granular policy application and user management.</p>
<pre><code>
 Sandbox Test (Root OU  environment) [Acctual ROOT is designershaik.com]
    ├── Group Central (Existing OU for Corporate Functions)
    │   ├── Governance (For legal, compliance, HR, and IT oversight)
    │   │   ├── Policies & Procedures
    │   │   ├── Legal
    │   │   ├── Compliance
    │   │   └── IT Operations
    │   ├── Finance
    │   ├── Human Resources
    │   └── Executive (For steering committee, board packs, KPI owners)
    │       ├── Steering Committee
    │       ├── Board
    │       └── KPI Management
    │
    ├── DS_Studio (For design, production, and core media creation)
    │   ├── Production (For active projects and raw creative assets)
    │   │   ├── Video Production
    │   │   ├── Photography
    │   │   ├── Graphic Design
    │   │   └── Audio Production
    │   ├── Archives (Studio-specific, long-term raw asset storage)
    │   ├── Processing & AI (For n8n, Weaviate, OpenAI integrations - primarily service accounts)
    │   │   ├── Staging (Temporary storage during processing)
    │   │   ├── AI-Processed (Output of AI tagging and metadata enrichment)
    │   │   └── Metadata Logs (For PostgreSQL and audit trails)
    │   ├── Processed Media (Categorized and optimized media for distribution)
    │   │   ├── Web-Optimized (For Cloudinary distribution)
    │   │   ├── Social-Media-Posts (Optimized for social channels)
    │   │   ├── Ads-Promotions (Optimized for advertising campaigns)
    │   │   └── Archived-Media (Long-term storage of final processed assets)
    │   ├── Integration Accounts (For DSI Media Repository service accounts)
    │   │   ├── n8n Service Account
    │   │   ├── Weaviate Service Account
    │   │   ├── Cloudinary Service Account
    │   │   └── ERP Integration Account
    │   └── Backup & Recovery (For QNAP NAS and disaster recovery plans for the repository)
    │   └── Shared Resources (Studio-specific shared templates, guides)
    │
    ├── DS_Brand (For marketing, brand management, and external communications)
    │   ├── Marketing Campaigns (For active campaign assets and planning)
    │   │   ├── Product Launches
    │   │   ├── Seasonal Promotions
    │   │   └── Digital Advertising
    │   ├── Brand Assets (Central repository for official logos, guidelines, approved media)
    │   ├── Public Relations
    │   ├── Social Media Management
    │   └── Shared Resources (Brand-specific templates, communication guidelines)
    │
    │
    └── MCV
        ├── Engineering ( Engineering department)
        ├── Manufacturing Admin ( Manufacturing Administration department)
        ├── Production ( Production department)
        └── Supply Chain Management ( Supply Chain Management department)
  
</code></pre>
<h3>3.2 Shared Drive Naming Convention</h3>
<p><code>[Prefix]_[Department/Project]_[Purpose]</code><br>e.g., <code>00_Governance_Protocols</code>, <code>10_Marayai_MasterPlans</code></p>
<h3>3.3 Access & Permissions</h3>
<p>Permissions are strictly managed at the OU and shared drive level, adhering to the principle of least privilege.</p>
<h3>3.4 Integration with DSi Repository</h3>
<p>Shared Drives serve as the primary source for media ingestion into the DSi Product Repository, ensuring a single source of truth.</p>
</section>

<section id="repository">
<h2>📁 DSI Repository Structure</h2>
<p>The DSI Media Repository Integration Architecture is an end-to-end automated media processing pipeline that streamlines the management of digital assets for DSI's luxury product lines. The system automatically ingests media files from Google Drive, processes them through AI services, stores semantic vectors in Weaviate, logs metadata in PostgreSQL, and optimizes media for CDN distribution.</p>

<h3>High-Level Architecture</h3>
<div class="mermaid">
graph TB
    subgraph "Data Sources"
        GD[Google Drive<br/>DSI Product Repository]
        QNAP[QNAP NAS<br/>Backup Storage]
    end
    subgraph "Processing Layer"
        PS[Google Pub/Sub<br/>Event Transport]
        N8N[n8n Workflows<br/>Orchestration Engine]
        OAI[OpenAI<br/>AI Analysis]
    end
    subgraph "Storage Layer"
        WV[Weaviate<br/>Vector Database]
        PG[PostgreSQL<br/>Metadata & Logs]
        CDN[Cloudinary<br/>CDN & Optimisation]
    end
    subgraph "Notification Layer"
        GC[Google Chat<br/>Team Notifications]
    end
    GD -->|File Upload Event| PS
    PS -->|Trigger| N8N
    N8N -->|Send for Analysis| OAI
    N8N -->|Store Vectors| WV
    N8N -->|Log Metadata| PG
    N8N -->|Upload & Optimize| CDN
    N8N -->|Backup| QNAP
    N8N -->|Notify Team| GC
    N8N -->|Update Metadata| GD

    style GD fill:#e1f5fe
    style N8N fill:#f3e5f5
    style WV fill:#e8f5e8
    style PG fill:#fff3e0
    style CDN fill:#fce4ec
    style PS fill:#cceeff
    style OAI fill:#ffebcc
    style QNAP fill:#e6e6e6
    style GC fill:#d3f5e9
</div>
<h3>Repository Folder Structure</h3>
<div class="mermaid">
graph TD
    Root[DSI-Product-Repository]

    subgraph "System Folders"
        Meta[Metadata/]
        Proc[Processed-Media/]
    end

    subgraph "Product Palaces"
        PF[Palace-of-Fragrances/]
        PP[Palace-of-Precision/]
        PS[Palace-of-Style/]
    end

    subgraph "Metadata Structure"
        Meta --> Tag[Tagging-Data/]
        Meta --> AI[AI-Generated-Tags/]
        Meta --> Multi[Multilingual-Descriptions/]
        Meta --> Ver[Version-Control/]
        Meta --> Change[Media-Change-History/]
        Meta --> Approval[Approval-Stages/]
    end

    subgraph "Processed Media"
        Proc --> Web[Web-Optimized/]
        Proc --> ERP[ERP-Integrated/]
        Proc --> Social[Social-Media-Posts/]
    end

    subgraph "Palace of Fragrances"
        PF --> Precious[Precious-Range/]
        PF --> Classic[Classic-Range/]

        Precious --> OptimumGold[Objet-d-Art-Optimum-Precious-Gold/]
        Precious --> SterlinSilver[Objet-d-Art-Luxury-Sterling-Silver/]

        Classic --> Amethyst[Opulent-Shaik-Amethyst/]
        Classic --> Sapphire[Opulent-Shaik-Sapphire/]
        Classic --> Emerald[Chic-Shaik-Emerald/]
        Classic --> Onyx[Sochi-Onyx/]
        Classic --> Amber[Amber-Kroud/]
    end

    Root --> Meta
    Root --> Proc
    Root --> PF
    Root --> PP
    Root --> PS

    style Root fill:#f9f9f9
    style Meta fill:#e3f2fd
    style Proc fill:#e8f5e8
    style PF fill:#fce4ec
    style PP fill:#fff3e0
    style PS fill:#f3e5f5
</div>
<h3>File Naming Convention</h3>
<div class="highlight">
<strong>Pattern:</strong> <code>{ProductName}_{SKU}_{descriptor}_{timestamp}.{extension}</code> <br><br>
<strong>Examples:</strong>
<ul>
  <li><code>Opulent-Shaik-Amethyst_OSA-GE-100_original_20250703.jpg</code></li>
  <li><code>Objet-d-Art-Optimum_OAO-FL-50_web_optimized.webp</code></li>
  <li><code>AstroTime-MK1_ATM-IG-001_ai_metadata.json</code></li>
</ul>
</div>
</section>

<section id="database">
<h2>🗄️ Database & Data-Lake Blueprint</h2>
<h3>5.1 PostgreSQL (Metadata & Logs)</h3>
<p>Primary database for structured metadata, audit trails, and workflow logs.</p>
  <pre><code>-- Media Assets Table
CREATE TABLE media_assets (
    id SERIAL PRIMARY KEY,
    drive_file_id VARCHAR(255) UNIQUE,
    weaviate_object_id UUID,
    product_name VARCHAR(255),
    sku VARCHAR(100),
    file_url TEXT,
    processing_status VARCHAR(50),
    ai_description TEXT,
    ai_tags TEXT[],
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Processing Logs Table
CREATE TABLE processing_logs (
    id SERIAL PRIMARY KEY,
    media_asset_id INTEGER REFERENCES media_assets(id),
    workflow_execution_id VARCHAR(255),
    step_name VARCHAR(100),
    status VARCHAR(50),
    error_message TEXT,
    processing_time INTERVAL,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Indexes for Performance
CREATE INDEX idx_media_assets_sku ON media_assets(sku);
CREATE INDEX idx_media_assets_status ON media_assets(processing_status);
CREATE INDEX idx_processing_logs_asset_id ON processing_logs(media_asset_id);
CREATE INDEX idx_processing_logs_status ON processing_logs(status);</code></pre>
<h3>5.2 Weaviate (Vector Database)</h3>
<p>Used for storing semantic vectors generated from media content, enabling advanced AI-driven search and recommendations.</p>
  <pre><code>{
  "classes": [{
    "class": "MediaAsset",
    "vectorizer": "text2vec-openai",
    "properties": [
      {"name": "productName", "dataType": ["string"]},
      {"name": "sku", "dataType": ["string"]},
      {"name": "description", "dataType": ["text"]},
      {"name": "tags", "dataType": ["string[]"]},
      {"name": "fileUrl", "dataType": ["string"]},
      {"name": "processingStatus", "dataType": ["string"]},
      {"name": "driveFileId", "dataType": ["string"]},
      {"name": "timestamp", "dataType": ["date"]}
    ]
  }]
}</code></pre>
<h3>5.3 Data Lake Strategy</h3>
<p>The DSI Data Lake leverages AWS S3 as the primary storage backbone, integrating with Google Workspace Drive as the source repository. The architecture focuses on workflow-driven data movement where n8n processes append metadata and processed media back to Google Drive while maintaining long-term archives in AWS S3 with intelligent lifecycle management.</p>

<h4>AWS-Centric Data Lake Architecture</h4>
<div class="mermaid">
graph TB
    subgraph "Google Workspace (Source)"
        GWS[Google Workspace Drive<br/>DSI Repository]
        GWSMETA[Drive: /Metadata/<br/>AI Tags & Change History]
        GWSPROC[Drive: /Processed-Media/<br/>CDN URLs & Optimized]
    end
    
    subgraph "Processing Infrastructure"
        N8N[n8n Container<br/>Workflow Orchestration]
        WV[Weaviate Database<br/>Vector Storage]
        RDS[AWS RDS PostgreSQL<br/>Metadata & Logs]
    end
    
    subgraph "AWS Data Lake Tiers"
        subgraph "Hot Storage (0-30 days)"
            S3_STD[AWS S3 Standard<br/>Active Processing]
            CDN[Cloudinary CDN<br/>Distribution Cache]
        end
        
        subgraph "Warm Storage (30-365 days)"
            S3_IA[AWS S3 Infrequent Access<br/>Recent Archives]
        end
        
        subgraph "Cold Storage (1-7 years)"
            S3_GLACIER[AWS S3 Glacier<br/>Long-term Archives]
        end
        
        subgraph "Deep Archive (7+ years)"
            S3_DEEP[AWS S3 Deep Archive<br/>Compliance Storage]
        end
    end
    
    subgraph "Monitoring & Analytics"
        CW[CloudWatch<br/>Metrics & Logs]
        ATHENA[AWS Athena<br/>SQL Analytics]
        QSIGHT[QuickSight<br/>Business Intelligence]
    end
    
    subgraph "Local Infrastructure"
        QNAP[QNAP NAS<br/>Local Backup]
    end
    
    %% Workflow Data Flows
    GWS -->|File Upload Trigger| N8N
    N8N -->|AI Processing| WV
    N8N -->|Metadata Logging| RDS
    N8N -->|CDN Upload| CDN
    N8N -->|Archive Copy| S3_STD
    N8N -->|Backup Sync| QNAP
    
    %% Workflow Append Operations
    N8N -->|Append AI Metadata| GWSMETA
    N8N -->|Append CDN URLs| GWSPROC
    
    %% AWS Lifecycle Management
    S3_STD -->|30 days| S3_IA
    S3_IA -->|365 days| S3_GLACIER
    S3_GLACIER -->|7 years| S3_DEEP
    
    %% Monitoring Integration
    N8N -->|Workflow Logs| CW
    RDS -->|Query Logs| CW
    WV -->|Performance Metrics| CW
    S3_STD -->|Access Patterns| CW
    
    %% Analytics Pipeline
    RDS -->|ETL Queries| ATHENA
    S3_STD -->|Data Lake Queries| ATHENA
    ATHENA -->|Business Reports| QSIGHT
    
    style GWS fill:#4285f4,color:#fff
    style N8N fill:#f3e5f5,color:#000
    style WV fill:#fa6423,color:#fff
    style RDS fill:#ff9900,color:#fff
    style S3_STD fill:#ff9900,color:#fff
    style S3_IA fill:#ffb84d,color:#000
    style S3_GLACIER fill:#cc7a00,color:#fff
    style S3_DEEP fill:#806600,color:#fff
    style CW fill:#ff4b4b,color:#fff
    style CDN fill:#3448c5,color:#fff
</div>
</section>

<section id="automation">
<h2>🤖 Automation & AI-Agent Matrix</h2>
<table>
  <thead>
    <tr>
      <th>Function Area</th>
      <th>Tool / Agent</th>
      <th>Relevant Sections</th>
      <th>Key Use Case</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>Media Ingestion</td><td>n8n</td><td>4.1</td><td>Google Drive ↔ Cloudinary sync</td></tr>
    <tr><td>AI Tagging</td><td>OpenAI + Weaviate</td><td>4.2</td><td>Automatic metadata generation</td></tr>
    <tr><td>CDN Optimisation</td><td>Cloudinary</td><td>4.3</td><td>Image / video format conversion</td></tr>
    <tr><td>ERP Integration</td><td>n8n</td><td>6.2, 6.3</td><td>Product data sync</td></tr>
    <tr><td>Legal</td><td>5.1</td><td>Compliance tracking</td></tr>
    <tr><td>Investor Relations</td><td>20_Marketing</td><td>3.3, 3.4</td><td>Data-room generation</td></tr>
    <tr><td>Operational Efficiency</td><td>40_Technical & APIs</td><td>6.2, 6.3, 6.4</td><td>ERP ↔ Weaviate sync; n8n orchestrator</td></tr>
  </tbody>
</table>
</section>

<section id="media-guide">
<h2>🎞️ Media-Pipeline Implementation Guide</h2>
<p>This section details the complete technical specification for deploying the DSI Media Repository Integration Architecture with automated workflows from upload to CDN distribution.</p>

<h3>Automated Workflow Processes</h3>
<h4>Complete End-to-End Process Flow</h4>
<div class="mermaid">
flowchart TB
    subgraph "Phase 1: Ingestion"
        Upload[File Upload] --> Detection[Auto-Detection]
        Detection --> Backup[QNAP Backup]
        Backup --> Log[Change Log]
    end

    subgraph "Phase 2: AI Processing"
        Log --> AI[Weaviate Analysis]
        AI --> Tags[Generate Tags]
        Tags --> Meta[Create Metadata]
    end

    subgraph "Phase 3: CDN Distribution"
        Meta --> CDN[Cloudinary Upload]
        CDN --> Optimize[Auto-Optimization]
        Optimize --> URLs[Generate URLs]
    end

    subgraph "Phase 4: Integration"
        URLs --> ERP[ERP Integration]
        URLs --> Social[Social Media Variants]
        URLs --> Web[Web Distribution]
    end

    Web --> Final[Media Ready for Distribution]

    style Upload fill:#e1f5fe
    style AI fill:#f3e5f5
    style CDN fill:#fce4ec
    style Final fill:#e8f5e8
</div>

<h4>Workflow 1: Media Ingestion & Backup</h4>
<ol>
  <li><strong>File Upload to Product Folder</strong> → Detect File via Google Drive API</li>
  <li><strong>Extract Product Name & SKU</strong> from Folder Path</li>
  <li><strong>Log File Information</strong> in Tracking System</li>
  <li><strong>Trigger QNAP NAS Backup Sync</strong></li>
  <li><strong>Create Initial Metadata Record</strong></li>
  <li><strong>Send Google Chat Notification</strong></li>
  <li><strong>Complete:</strong> Update <code>/Metadata/Media-Change-History/{ProductName}_{SKU}_change_log.json</code></li>
  <li><strong>File Ready for AI Processing</strong></li>
</ol>
<div class="note">
<strong>Output Location:</strong><br>
<code>/Metadata/Media-Change-History/{ProductName}_{SKU}_change_log.json</code>
</div>
</section>

<section id="implementation">
  <h2>🔧 Technical Implementation</h2>

  <h3>Option A: Simplified Google Workspace Approach (Recommended)</h3>
  <div class="highlight">
    <strong>Best for:</strong> SMB teams with existing Google Workspace accounts
  </div>

  <h4>n8n Workflow Configuration</h4>
  <pre><code>{
  "workflowName": "DSI Media Upload Processor",
  "trigger": {
    "type": "Google Drive Trigger",
    "settings": {
      "authentication": "oAuth2",
      "resource": "file", 
      "event": "fileCreated",
      "folderId": "{{ $env.DSI_DRIVE_FOLDER_ID }}",
      "watchSubfolders": true,
      "fileTypes": ["image/jpeg", "image/png", "image/webp", "video/mp4", "video/mov"],
      "pollInterval": 300,
      "excludePaths": ["Archives", "Metadata", "System-Integration"]
    }
  },
  "filters": [{
    "type": "IF", 
    "condition": "{{ $json.path.includes('Product-Images') || $json.path.includes('Videos') || $json.path.includes('3D-Renders') }}"
  }],
  "errorHandling": {
    "retryAttempts": 3,
    "retryDelay": 60,
    "errorNotification": "Google Chat"
  }
}</code></pre>

  <h4>Setup Steps for Google Workspace</h4>
  <ol>
    <li>In n8n, go to Credentials → Add Credential → Google Drive OAuth2 API</li>
    <li>Click "Connect my account" and sign in with your Google Workspace account</li>
    <li>Grant permissions for Drive access</li>
    <li>No need for separate GCP project or client IDs!</li>
  </ol>

  <h3>Environment Variables (Simplified Google Workspace Approach)</h3>
  <pre><code># DSI Repository  
DSI_DRIVE_FOLDER_ID=your_root_folder_id

# AI & Vector Storage
WEAVIATE_API_KEY=your_weaviate_key
WEAVIATE_ENDPOINT=your_weaviate_url
OPENAI_API_KEY=your_openai_key

# CDN & Optimization
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key  
CLOUDINARY_API_SECRET=your_api_secret

# Notifications (Optional)
GOOGLE_CHAT_WEBHOOK=your_chat_webhook_url</code></pre>
</section>

<section id="deployment">
  <h2>🚀 Deployment & Hosting Options</h2>

  <div class="cost-comparison">
    <div class="cost-card">
      <h4>Option A: n8n.cloud + Self-hosted Weaviate</h4>
      <p class="cost-price">~$27/month</p>
      <ul>
        <li><strong>Components:</strong> n8n (managed cloud service), Weaviate (VPS deployment), PostgreSQL (VPS deployment)</li>
        <li><strong>Ideal For:</strong> Quick PoC, low operational overhead</li>
        <li><strong>Complexity:</strong> Low</li>
      </ul>
    </div>
    <div class="cost-card">
      <h4>Option B: Fully Self-hosted</h4>
      <p class="cost-price">~$12/month</p>
      <ul>
        <li><strong>Components:</strong> All services on Docker containers, single VPS or local server</li>
        <li><strong>Ideal For:</strong> Cost-sensitive teams, full control</li>
        <li><strong>Complexity:</strong> Medium</li>
      </ul>
    </div>
    <div class="cost-card">
      <h4>Option C: Kubernetes Cluster</h4>
      <p class="cost-price">~$60+/month</p>
      <ul>
        <li><strong>Components:</strong> Helm charts for all services, auto-scaling capabilities, TLS Ingress, Load balancing</li>
        <li><strong>Ideal For:</strong> Production scale, high availability</li>
        <li><strong>Complexity:</strong> High</li>
      </ul>
    </div>
    <div class="cost-card">
      <h4>Option D: AWS Enterprise</h4>
      <p class="cost-price">~$150-300/month</p>
      <ul>
        <li><strong>Components:</strong> ALB (Application Load Balancer), EC2 instances, RDS (managed PostgreSQL), S3 storage, IAM security</li>
        <li><strong>Ideal For:</strong> Enterprise SLA requirements</li>
        <li><strong>Complexity:</strong> Very High</li>
      </ul>
    </div>
  </div>
</section>

<section id="security">
  <h2>🔒 Security & Compliance</h2>

  <h3>Data Protection Strategy</h3>
  <div class="mermaid">
    graph TD
        subgraph "Security Layers"
            API[API Key Management]
            TLS[TLS Encryption]
            IAM[Identity & Access Management]
            Audit[Audit Logging]
        end
        
        subgraph "Storage Security"
            Vault[Credential Vaults]
            Encrypt[Data Encryption at Rest]
            Backup[Secure Backup Strategy]
        end
        
        subgraph "Access Control"
            RBAC[Role-Based Access Control]
            MFA[Multi-Factor Authentication]
            Network[Network Security]
        end
        
        API --> Vault
        TLS --> Encrypt
        IAM --> RBAC
        Audit --> Backup
        
        style API fill:#e3f2fd
        style TLS fill:#e8f5e8
        style IAM fill:#fff3e0
        style Audit fill:#fce4ec
  </div>

  <h3>Security Requirements</h3>
  <div class="warning">
    <strong>Critical Security Measures:</strong>
    <ul>
      <li>All API keys stored in secure credential vaults</li>
      <li>Encrypted communication between all services</li>
      <li>Regular credential rotation schedule</li>
      <li>Access logging and audit trails</li>
      <li>Role-based permissions across all systems</li>
      <li>Least privilege access principles</li>
      <li>Regular access reviews and updates</li>
      <li>Secure backup and recovery procedures</li>
    </ul>
  </div>
</section>

<section id="testing">
  <h2>🧪 Testing & Monitoring</h2>

  <h3>Testing Protocol</h3>
  <div class="mermaid">
flowchart TD
    Upload[1. Test Upload] --> Logs[2. Verify Logs]
    Logs --> Process[3. Process Validation]
    Process --> Output[4. Output Check]
    
    Upload --> UploadDetail[Upload test image to<br/>Product-Images folder]
    Logs --> LogDetail[Check n8n execution logs<br/>for trigger activation]
    Process --> ProcessDetail[Confirm workflow<br/>processes file correctly]
    Output --> OutputDetail[Verify Cloudinary URLs in<br/>Processed-Media folder]
    
    style Upload fill:#e1f5fe
    style Logs fill:#f3e5f5
    style Process fill:#fff3e0
    style Output fill:#e8f5e8
  </div>

  <h3>Performance Monitoring</h3>
  <div class="note">
    <strong>Key Metrics to Track:</strong>
    <ul>
      <li>Execution logging in n8n</li>
      <li>Failed triggers or timeouts</li>
      <li>Upload frequency and polling interval optimization</li>
      <li>CDN upload success rates</li>
      <li>API call response times</li>
      <li>Storage usage and growth rates</li>
    </ul>
  </div>
</section>

<section id="best-practices">
  <h2>⭐ Best Practices & Optimization</h2>

  <h3>Performance Optimization</h3>
  <ul>
    <li><strong>Event-driven Architecture:</strong>
      <ul>
        <li>Reduce latency with real-time triggers</li>
        <li>Minimize API quota usage</li>
        <li>Implement efficient polling strategies</li>
      </ul>
    </li>
    <li><strong>Infrastructure as Code:</strong>
      <ul>
        <li>Version control all configuration changes</li>
        <li>Automated deployment pipelines</li>
        <li>Environment-specific configurations</li>
      </ul>
    </li>
    <li><strong>Caching Strategy:</strong>
      <ul>
        <li>CDN edge caching for optimized media</li>
        <li>Database query optimization</li>
        <li>Vector search result caching</li>
      </ul>
    </li>
  </ul>

  <h3>Implementation Roadmap</h3>
  <div class="highlight">
    <strong>Phase 1: Foundation</strong>
    <ul>
      <li>Set up basic infrastructure (Docker containers)</li>
      <li>Configure n8n with Google Workspace OAuth</li>
      <li>Deploy PostgreSQL instance</li>
      <li>Test file upload detection</li>
    </ul>
    
    <strong>Phase 2: Core Workflows</strong>
    <ul>
      <li>Implement media ingestion workflow</li>
      <li>Set up Weaviate integration</li>
      <li>Configure AI tagging pipeline</li>
      <li>Test end-to-end basic flow</li>
    </ul>
    
    <strong>Phase 3: CDN Integration</strong>
    <ul>
      <li>Configure Cloudinary integration</li>
      <li>Implement optimization workflows</li>
      <li>Set up URL generation and mapping</li>
      <li>Test media distribution pipeline</li>
    </ul>

    <strong>Phase 4: Production Hardening</strong>
    <ul>
      <li>Implement security measures</li>
      <li>Set up monitoring and alerting</li>
      <li>Configure backup procedures</li>
      <li>Performance testing and optimization</li>
    </ul>
  </div>
</section>

<section id="change">
<h2>🔄 Change-Management & Review Cycle</h2>
<ul>
  <li><strong>Weekly "Friday Pulse"</strong> call logs headline updates → pushed to <code>03_Change‑Log/</code></li>
  <li><strong>CR‑### form</strong> required for any schema or permission alteration (owner: Data Steward)</li>
  <li>Superseded versions archived to <code>99_Archive/Governance</code></li>
  <li>Next scheduled full review: <strong>01 Oct 2025</strong></li>
</ul>
</section>

</main>

<footer>
  <p>© 2025 DSI Media Repository Implementation Guide</p>
  <p>This documentation provides complete technical specifications for deploying the DSI Media Repository Integration Architecture with automated workflows from upload to CDN distribution.</p>
</footer>

<script>
// Horizontal Navigation Scroll Behavior
window.addEventListener('scroll', function() {
  const nav = document.getElementById('horizontalNav');
  const toc = document.querySelector('.toc');
  const tocBottom = toc.offsetTop + toc.offsetHeight;
  
  if (window.scrollY > tocBottom) {
    nav.classList.add('visible');
  } else {
    nav.classList.remove('visible');
  }
  
  // Update active navigation item
  updateActiveNavItem();
});

// Update active navigation item based on scroll position
function updateActiveNavItem() {
  const sections = document.querySelectorAll('section[id]');
  const navLinks = document.querySelectorAll('.nav-links a');
  
  let currentSection = '';
  const scrollPosition = window.scrollY + 100; // Offset for better UX
  
  sections.forEach(section => {
    const sectionTop = section.offsetTop;
    const sectionHeight = section.offsetHeight;
    
    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
      currentSection = section.getAttribute('id');
    }
  });
  
  navLinks.forEach(link => {
    link.classList.remove('active');
    if (link.getAttribute('href') === '#' + currentSection) {
      link.classList.add('active');
    }
  });
}

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      const headerHeight = 80;
      const navHeight = 60;
      const targetPosition = target.offsetTop - headerHeight - navHeight;
      
      window.scrollTo({
        top: targetPosition,
        behavior: 'smooth'
      });
    }
  });
});

// Add intersection observer for section animations
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -100px 0px'
};

const sectionObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('section-visible');
    }
  });
}, observerOptions);

document.querySelectorAll('section').forEach(section => {
  sectionObserver.observe(section);
});

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  updateActiveNavItem();
});
</script>

</body>
</html>
